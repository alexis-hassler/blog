---
layout: post
title: Construire soi-même JBoss AS 7 (ou WildFly)
author: Alexis Hassler
tags:
- JBossAS7
- WildFly
- build
courses:
- wildfly
---

Question préliminaire : pourquoi vouloir faire un build de JBoss ?<br /><br />La première raison, c'est pour le
principe. JBoss AS est open source et communautaire. Dans cet esprit, il est impératif de proposer un système de build
simple et pratique. Sur ce point, je dois dire que les progrès sont impressionnants entre JBoss AS 5 et JBoss AS
7.<br /><br />La deuxième raison dérive de la première. Je veux pouvoir faire le buid pour m'autoriser à proposer des
corrections de bugs. OK, je ne l'ai fait qu'une fois, mais c'est un début.<br /><br />La troisième raison est plus
pragmatique. La version 7.1.2 de JBoss AS n'existe que sous la forme d'un tag dans le&nbsp;référentiel&nbsp;de source,
il n'y a pas eu de release officielle. Comme des bugs gênants ont été corrigés, c'est cette version-là que je veux
utiliser.<br /><br />Voyons comment ça marche...<br /><br />
<!--more-->
<br /><br />Le code source de JBoss AS 7 est sur <a href="https://github.com/jbossas/jboss-as">Github</a> et
le build est basé sur Maven. La compilation nécessite un JDK 6 ou 7. <br /><br />Donc, <b>si vous avez git et maven</b>,
il suffit de faire les quelques lignes de commande suivantes&nbsp;:<br />
<pre
    class="brush:java">git clone https://github.com/wildfly/wildfly.git<br />cd wildfly<br />git checkout 7.1.2.Final<br />mvn install -DskipTests<br />cp -R build/target/jboss-as-7.1.2.Final /opt/java/<br /></pre>
<br />Si vous avez un oeil&nbsp;entraîné, vous aurez immédiatement repéré l'option&nbsp;-DskipTests. Eh oui, le build de
la version 7.1.2 est cassé à cause d'un test en échec ! Oublions ce test...<br /><br /><b>Vous n'avez pas Maven ?</b> Ce
n'est pas grave, il est intégré au code source et le script de build saura l'utiliser.<br /><br />
<pre
    class="brush:java">git clone https://github.com/wildfly/wildfly.git<br />cd wildfly<br />git checkout 7.1.2.Final<br />./build.sh -DskipTests<br />cp -R build/target/jboss-as-7.1.2.Final /opt/java/</pre>
<br /><b>Vous n'avez pas git ?</b> Là aussi, tout est prévu, puisque Github met des archives zip et tar.gz en
téléchargement.<br /><br />
<pre
    class="brush:java">wget https://github.com/wildfly/wildfly/tarball/7.1.2.Final<br />tar -xvf&nbsp;7.1.2.Final<br />cd&nbsp;wildfly-wildfly-*<br />./build.sh -DskipTests<br />cp -R build/target/jboss-as-7.1.2.Final /opt/java/<br /></pre>
<br />Voilà.<br /><br />EDIT : pour construire soit-même d'autres versions de JBoss AS 7 ou pour WildFly, jetez un coup
d'oeil aux commentaires ci-dessous.<br /><br />EDIT (07/08/2013) : le code source de JBoss AS 7 est passé du repository
git://github.com/jbossas/jboss-as.git à https://github.com/wildfly/wildfly.git ; sous la pression d'<a
    href="http://www.ehsavoie.com/">Emmanuel Hugonnet</a>,&nbsp;j'ai modifié les URLs en conséquence.