---
layout: post
title: JRebel avec OpenJDK et Grizzly
date: '2010-03-31T16:39:00.009+02:00'
author: Alexis Hassler
tags:
- Grizzly
- JRebel
- OpenJDK
modified_time: '2010-03-31T16:48:38.722+02:00'
blogger_id: tag:blogger.com,1999:blog-1829028238633284708.post-2813661043122792044
blogger_orig_url: http://blog.alexis-hassler.com/2010/03/jrebel-avec-openjdk-et-grizzly.html

---

Grâce au <a href="http://www.parisjug.org/">ParisJUG</a>,j'ai pu obtenir une licence <a href="http://www.zeroturnaround.com/jrebel/">JRebel</a>. JRebel est censé faire gagner du temps aux développeurs en leur évitant de redémarrer leur application ou serveur d'applications après chaque changement. Selon le serveur d'applications, le redéploiement à chaud peut répondre partiellement à ce besoin, mais JRebel semble aller plus loin, en rechargeant les classes au niveau de la JVM.<br /><br />Dans un projet récent, j'ai eu à travailler avec Grizzly, OpenJDK et Jersey pour développer des services RESTful, et j'ai compris l'intérêt que pouvait avoir ce type d'outil car, en phase d'évaluation de la plateforme, je fais beaucoup de petites modifications dont je veux voir immédiatement l'effet. Si redémarrer Grizzly est très rapide, cela demande des clics à des endroits différents dans l'IDE, Eclipse en l'occurrence. J'ai donc décider d'inclure JRebel dans cet environnement.<br /><!--more--><br /><h4>Installation</h4>Mon environnement de développement est déjà installé, avec :<br /><ul><li>Ubuntu 9.10</li><li>OpenJDK 6</li><li>Eclipse 3.5</li><li>Grizzly 1.9.8</li><li>Jersey 1.1.5</li></ul>La <a href="http://www.zeroturnaround.com/reference-manual/">documentation de JRebel</a> est très détaillée sur la procédure d'installation. Pour résumer, dans mon environnement, j'ai suivi la marche suivante :<br /><ul><li><a href="http://www.zeroturnaround.com/jrebel/current/">Téléchargement de JRebel</a>, j'ai pris la version 3.0 RC1</li><li>Installation de JRebel : <code>java -jar jrebel-setup.jar</code></li><li>Installation de la licence</li><li>Ajout du <a href="http://www.zeroturnaround.com/update-site/">plug-in Eclipse</a></li><li><a href="http://www.zeroturnaround.com/reference-manual/ide.html#ide-1.2">Configuration du workspace d'Eclipse</a></li><li><a href="http://www.zeroturnaround.com/reference-manual/app.html#app-2.2">Génération du fichier rebel.xml</a> dans le répertoire src du projet </li><li>Modification de la <a href="http://www.zeroturnaround.com/reference-manual/server.html#server-3.2">configuration de lancement</a>, par cocher "Enable JRebel agent"</li></ul><h4>Premier essai</h4>Après cette manipulation, j'ai lancé Grizzly depuis une classe Main.<br /><pre class="brush:java">public class GrizzlyStarter {<br />  public static void main(String args[]) {<br />    System.out.println("Starting grizzly...");<br />    try {<br />      final String baseUri = "http://localhost:8888/";<br />      final Map<string, string=""> initParams = new HashMap();<br />      initParams.put("com.sun.jersey.config.property.packages",<br />                     "fr.sewatech.formation.jaxrs");<br />      SelectorThread threadSelector = GrizzlyWebContainerFactory.create(<br />                         baseUri, initParams);<br />      System.in.read();<br />      threadSelector.stopEndpoint();<br />      System.out.println("Grizzly stopped.");<br />      System.exit(0);<br />    } catch (Exception e) {<br />      e.printStackTrace();<br />      System.exit(1);<br />    }<br />  }<br />}</string,></pre>Une fois Grizzly lancé, je peux faire toutes les modifications que je souhaite dans mon application, celles-ci sont prises en compte à chaud. Plus besoin de redémarrer ! La seule classe pour laquelle il n'y a pas de rechargement à chaud, est la classe de lancement.<br /><h4>Premières impressions</h4>Ce premier essai est prometteur. Je pense qu'il y a effectivement du temps à gagner avec un tel outil et à $150 la licence corporate, c'est très vite rentable. Évidemment, ce n'est qu'une première impression qui devra être confirmée par un usage plus intensif. En tout cas, à partir de maintenant je l'utiliserai à chaque fois que je pourrai.<br />Et ce serait cool, qu'on puisse aussi proposer des licences au <a href="http://www.lyonjug.org/">LyonJUG</a>...